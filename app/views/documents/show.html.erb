<div class="main-container">
  <nav class="txt-center margin-block">
    <%= link_to documents_path do %>
      <%= icon_tag "arrow-left" %> Back to Documents
    <% end %> |
    <%= link_to "Edit", edit_document_path(@document) %> |
    <%= link_to "Delete", document_path(@document),
                data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this document?" },
                class: "txt-negative",
                aria_label: "Delete #{@document.title}" %>
  </nav>

  <% if notice %>
    <div class="alert alert--positive"><%= notice %></div>
  <% end %>

  <div class="card">
    <h1><%= @document.title %></h1>

    <div class="txt-pre-wrap txt-normal-lines">
      <%== marksmithed sanitize(@document.content, tags: %w(table th tr td span) + ActionView::Helpers::SanitizeHelper.sanitizer_vendor.safe_list_sanitizer.allowed_tags.to_a) %>
    </div>

    <% if @document.file.attached? %>
      <div class="card pad margin-block-start" style="--card-bg: var(--color-canvas);">
        <p class="flex align-center gap-half margin-block-none">
          <%= icon_tag "paperclip" %>
          <strong>Attachment:</strong>
          <%= link_to @document.file.filename.to_s, rails_blob_path(@document.file, disposition: "attachment") %>
          (<%= number_to_human_size(@document.file.byte_size) %>)
        </p>
      </div>
    <% end %>

    <hr class="margin-block-double">

    <div class="txt-subtle txt-small">
      <p class="margin-block-none"><strong>Created:</strong> <%= @document.created_at.strftime("%B %d, %Y at %I:%M %p") %></p>
      <% if @document.updated_at != @document.created_at %>
        <p class="margin-block-none"><strong>Updated:</strong> <%= @document.updated_at.strftime("%B %d, %Y at %I:%M %p") %></p>
      <% end %>
    </div>
  </div>
</div>
