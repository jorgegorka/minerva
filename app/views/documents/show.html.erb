<div class="container">
  <div class="nav-links">
    <%= link_to "â† Back to Documents", documents_path %> |
    <%= link_to "Edit", edit_document_path(@document) %> |
    <%= link_to "Delete", document_path(@document), 
                data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this document?" },
                class: "text-danger",
                aria_label: "Delete #{@document.title}" %>
  </div>

  <% if notice %>
    <div class="alert alert-success"><%= notice %></div>
  <% end %>

  <div class="card">
    <h1><%= @document.title %></h1>
    
    <div style="white-space: pre-wrap; line-height: 1.8; color: #333;">
      <%== marksmithed sanitize(@document.content, tags: %w(table th tr td span) + ActionView::Helpers::SanitizeHelper.sanitizer_vendor.safe_list_sanitizer.allowed_tags.to_a) %>
    </div>
    
    <% if @document.file.attached? %>
      <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
        <p style="margin: 0;"><strong>ðŸ“Ž Attachment:</strong>
        <%= link_to @document.file.filename.to_s, rails_blob_path(@document.file, disposition: "attachment"), 
                    style: "color: #007bff; text-decoration: none;" %>
        (<%= number_to_human_size(@document.file.byte_size) %>)
        </p>
      </div>
    <% end %>
    
    <hr style="margin: 30px 0; border: none; border-top: 1px solid #ddd;">
    
    <div style="color: #666; font-size: 0.9rem;">
      <p><strong>Created:</strong> <%= @document.created_at.strftime("%B %d, %Y at %I:%M %p") %></p>
      <% if @document.updated_at != @document.created_at %>
        <p><strong>Updated:</strong> <%= @document.updated_at.strftime("%B %d, %Y at %I:%M %p") %></p>
      <% end %>
    </div>
  </div>
</div>
